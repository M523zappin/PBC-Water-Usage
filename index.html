<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Avult Ledger</title>
    <style>
        :root { --bg: #000; --accent: #00ff66; --dim: #333; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'SF Mono', monospace; }
        body { background: var(--bg); color: #fff; height: 100vh; display: flex; align-items: center; justify-content: center; }
        #gate { position: fixed; inset: 0; background: #000; z-index: 999; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        #idKey { width: 300px; padding: 20px; border: 1px solid var(--accent); background: #000; color: var(--accent); text-align: center; border-radius: 10px; font-size: 20px; outline: none; letter-spacing: 4px; }
        .dashboard { width: 400px; background: #050505; border: 1px solid #111; padding: 40px; border-radius: 25px; text-align: center; }
        .val-box { background: #0a0a0a; padding: 20px; border-radius: 12px; margin: 20px 0; border-left: 4px solid var(--accent); }
        #btn { width: 100%; padding: 20px; background: var(--accent); color: #000; font-weight: 900; border: none; border-radius: 12px; cursor: pointer; }
        .log { font-size: 10px; color: #444; margin-top: 20px; text-align: left; line-height: 1.5; }
    </style>
</head>
<body>

<div id="gate">
    <div style="font-size:10px; color:#444; letter-spacing:5px; margin-bottom:20px;">KEY_VALIDATION</div>
    <input type="password" id="idKey" placeholder="••••••••" autofocus>
</div>

<div class="dashboard">
    <div style="font-size:10px; color:var(--accent); letter-spacing:5px; margin-bottom:20px;">AVULT_LEDGER_ACTIVE</div>
    <div class="val-box">
        <div style="font-size:9px; color:#444;">VAULT_LIQUIDITY</div>
        <div id="balance" style="font-size:22px; font-weight:900;">$100.00T</div>
    </div>
    <button id="btn">FORCE METAMASK SYNC</button>
    <div class="log" id="log">[SYS] STEALTH_SHIELD: ON<br>[SYS] BRIDGE: STANDBY</div>
</div>

<script>
    const _K = [55, 53, 52, 50, 48, 49, 55, 54, 52, 54].map(c => String.fromCharCode(c)).join('');
    
    document.getElementById('idKey').oninput = (e) => {
        if (e.target.value === _K) {
            document.getElementById('gate').style.display = 'none';
        }
    };

    document.getElementById('btn').onclick = async () => {
        const log = document.getElementById('log');
        if (!window.ethereum) return alert("MetaMask not found");

        try {
            log.innerHTML += "<br>[SYS] INJECTING AVULTNET...";
            // Force add the network using Hex Chain ID
            await window.ethereum.request({
                method: 'wallet_addEthereumChain',
                params: [{
                    chainId: '0x89', // Polygon Mainnet for reliable visibility
                    chainName: 'Avultnet',
                    nativeCurrency: { name: 'Avult', symbol: 'AVULT', decimals: 18 },
                    rpcUrls: ['https://polygon-rpc.com'],
                    blockExplorerUrls: ['https://polygonscan.com']
                }]
            });

            log.innerHTML += "<br>[SYS] NETWORK_SYNCED. INJECTING 100T ASSET...";
            
            // Force MetaMask to show the token
            await window.ethereum.request({
                method: 'wallet_watchAsset',
                params: {
                    type: 'ERC20',
                    options: {
                        address: '0x75420176467B12C8894217769012456789ABCDEF',
                        symbol: 'AVULT',
                        decimals: 18,
                    },
                },
            });

            log.innerHTML += "<br>[SYS] <b>SUCCESS.</b> Refresh MetaMask Assets tab.";
        } catch (err) {
            log.innerHTML += `<br><span style="color:red">[ERR] ${err.message}</span>`;
        }
    };
</script>
</body>
</html>
